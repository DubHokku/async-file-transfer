# async-file-transfer
Simple asynchronous file transfer over tcp

Реализация клиент--серверного приложения GNU/Linux, ограничение портирования может быть связано с применением специфичного вызова sendfile(). Клиент передаёт содержимое файла через tcp сокет, сервер принимает содержимое файла и сохраняет в upload. Модуль сервера принимает и обрабатывает сигналы SIGTERM и SIGHUP, прерывая выполняемую в момент поступления сигнала передачу. Модуль сервера одновременно обрабатывает множество поступающих запросов без ожидания завершения установленных соединений.

Сборка:

    $ uname -r
    4.19.3-200.fc28.x86_64
    
    $ make
    
Запуск сервера:

    # ./imaqliq server
    
Запуск клиента:

    $ ./imaqliq filename hostaddr
    
где filename -- фаил для отправки на сервер и hostaddr -- ip системы с выполняемым модулем сервера.

Для выполнения проверки может потребоваться разрешить на системе с выполняемым модулем сервера обработку, поступающих на 127 порт-tcp запросов. Для разрешения обработки: 

    # firewall-cmd --add-port=127/tcp --permanent
    
    # firewall-cmd --reload 
    
для отмены разрешения:

    # firewall-cmd --remove-port =127/tcp --permanent
    
    # firewall-cmd --reload 

    
Ошибки:

. при передаче файла встречаются случаи, когда имя переданного на сервер файла состоит из первых байт содержимого файла. вероятная причина этого в том, что код возврата recv() -- result -- обрабатывается медленнее, чем в сокет поступает следующий кадр ...и заполняет буфер data[] или пакеты данных поступают/обрабатываются в другой последовательности ( не в том порядке ).
