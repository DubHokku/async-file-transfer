# async-file-transfer
Simple asynchronous file transfer over tcp

Реализация клиент--серверного приложения GNU/Linux, ограничение портирования может быть связано с применением специфичного вызова sendfile(). Клиент передаёт содержимое файла через tcp сокет, сервер принимает содержимое файла и сохраняет в upload. Модуль сервера обрабатывает сигналы SIGTERM и SIGHUP, завершая выполнение по завершении всех загрузок или наступлению таймаута, не прерывая выполняемую в момент поступления сигнала передачу. Во время обработки сигналов установка новых подключений игнорируется. Сервер выполнен по схеме однопоточного неблокирующего tcp-сервера, обрабатывает поступающие запросы без ожидания завершения установленных соединений.

Сборка:

    $ uname -r
    4.19.3-200.fc28.x86_64
    
    $ make
    
Запуск сервера:

    # ./imaqliq server
    
Запуск клиента:

    $ ./imaqliq filename hostaddr
    
где filename -- фаил для отправки на сервер и hostaddr -- ip системы с выполняемым модулем сервера.

Для выполнения проверки может потребоваться разрешить на системе с выполняемым модулем сервера обработку, поступающих на 127 порт-tcp запросов. Для разрешения обработки: 

    # firewall-cmd --add-port=127/tcp --permanent
    
    # firewall-cmd --reload 
    
для отмены разрешения:

    # firewall-cmd --remove-port=127/tcp --permanent
    
    # firewall-cmd --reload 

для выполнения проверки также может быть удобно закоментировать вызов функции mkdaemon(), выполняющей демонизацию ( отвязку процесса от консоли ):

    // mkdaemon();
    
в строке 94 imaqliq.cc
